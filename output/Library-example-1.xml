<?xml version="1.0" encoding="UTF-8"?>
<library xmlns="urn:hl7-org:elm:r1" xmlns:t="urn:hl7-org:elm-types:r1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:fhir="http://hl7.org/fhir" xmlns:qdm43="urn:healthit-gov:qdm:v4_3" xmlns:qdm53="urn:healthit-gov:qdm:v5_3" xmlns:a="urn:hl7-org:cql-annotations:r1" localId="0">
   <annotation translatorOptions="EnableAnnotations,EnableLocators,DisableListDemotion,DisableListPromotion" signatureLevel="None" xsi:type="a:CqlToElmInfo"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToString has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToInterval has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation message="The function FHIRHelpers.ToDateTime has multiple overloads and due to the SignatureLevel setting (None), the overload signature is not being included in the output. This may result in ambiguous function resolution at runtime, consider setting the SignatureLevel to Overloads or All to ensure that the output includes sufficient information to support correct overload selection at runtime." errorType="semantic" errorSeverity="warning" xsi:type="a:CqlToElmError"/>
   <annotation xsi:type="a:Annotation">
      <a:s r="334">
         <a:s>library example version '1.0.0'</a:s>
      </a:s>
   </annotation>
   <identifier id="example" system="http://somewhere.org/fhir/uv/myig" version="1.0.0"/>
   <schemaIdentifier id="urn:hl7-org:elm" version="r1"/>
   <usings>
      <def localId="1" localIdentifier="System" uri="urn:hl7-org:elm-types:r1"/>
      <def localId="206" locator="3:1-3:26" localIdentifier="FHIR" uri="http://hl7.org/fhir" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="206">
               <a:s>using </a:s>
               <a:s>
                  <a:s>FHIR</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </usings>
   <includes>
      <def localId="207" locator="5:1-5:51" localIdentifier="FHIRHelpers" path="http://fhir.org/guides/cqf/common/FHIRHelpers" version="4.0.1">
         <annotation xsi:type="a:Annotation">
            <a:s r="207">
               <a:s>include </a:s>
               <a:s>
                  <a:s>fhir.cqf.common.FHIRHelpers</a:s>
               </a:s>
               <a:s> version '4.0.1'</a:s>
            </a:s>
         </annotation>
      </def>
   </includes>
   <parameters>
      <def localId="216" locator="18:1-18:49" name="Measurement Period" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="216">
               <a:s>parameter &quot;Measurement Period&quot; </a:s>
               <a:s r="217">
                  <a:s>Interval&lt;</a:s>
                  <a:s r="218">
                     <a:s>DateTime</a:s>
                  </a:s>
                  <a:s>></a:s>
               </a:s>
            </a:s>
         </annotation>
         <parameterTypeSpecifier localId="217" locator="18:32-18:49" xsi:type="IntervalTypeSpecifier">
            <pointType localId="218" locator="18:41-18:48" name="t:DateTime" xsi:type="NamedTypeSpecifier"/>
         </parameterTypeSpecifier>
      </def>
   </parameters>
   <codeSystems>
      <def localId="208" locator="7:1-7:101" name="Observation Category Codes" id="http://terminology.hl7.org/CodeSystem/observation-category" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="208">
               <a:s>codesystem &quot;Observation Category Codes&quot;: 'http://terminology.hl7.org/CodeSystem/observation-category'</a:s>
            </a:s>
         </annotation>
      </def>
   </codeSystems>
   <valueSets>
      <def localId="209" locator="9:1-9:100" name="Encounter Inpatient" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="209">
               <a:s>valueset &quot;Encounter Inpatient&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.666.5.307'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="210" locator="10:1-10:111" name="Emergency Department Visit" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="210">
               <a:s>valueset &quot;Emergency Department Visit&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.117.1.7.1.292'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="211" locator="11:1-11:112" name="Telephone Evaluation" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1082" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="211">
               <a:s>valueset &quot;Telephone Evaluation&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1082'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="212" locator="12:1-12:112" name="Telephone Management" id="http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1053" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="212">
               <a:s>valueset &quot;Telephone Management&quot;: 'http://cts.nlm.nih.gov/fhir/ValueSet/2.16.840.1.113883.3.464.1003.101.12.1053'</a:s>
            </a:s>
         </annotation>
      </def>
      <def localId="213" locator="14:1-14:43" name="COVID-19 Screening Result" id="TBD" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="213">
               <a:s>valueset &quot;COVID-19 Screening Result&quot;: 'TBD'</a:s>
            </a:s>
         </annotation>
      </def>
   </valueSets>
   <codes>
      <def localId="214" locator="16:1-16:86" name="Laboratory Observation Category" id="laboratory" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="214">
               <a:s>code &quot;Laboratory Observation Category&quot;: 'laboratory' from </a:s>
               <a:s r="215">
                  <a:s>&quot;Observation Category Codes&quot;</a:s>
               </a:s>
            </a:s>
         </annotation>
         <codeSystem localId="215" locator="16:59-16:86" name="Observation Category Codes"/>
      </def>
   </codes>
   <contexts>
      <def localId="222" locator="20:1-20:15" name="Patient"/>
   </contexts>
   <statements>
      <def localId="220" locator="20:1-20:15" name="Patient" context="Patient">
         <expression localId="221" xsi:type="SingletonFrom">
            <operand localId="219" locator="20:1-20:15" dataType="fhir:Patient" templateId="http://hl7.org/fhir/StructureDefinition/Patient" xsi:type="Retrieve"/>
         </expression>
      </def>
      <def localId="224" locator="22:1-30:54" name="Inpatient, Emergency, or Telephone Evaluation or Management Encounter" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="224">
               <a:s>define &quot;Inpatient, Emergency, or Telephone Evaluation or Management Encounter&quot;:
  </a:s>
               <a:s r="278">
                  <a:s>
                     <a:s r="225">
                        <a:s r="265">
                           <a:s>(
    </a:s>
                           <a:s r="265">
                              <a:s r="254">
                                 <a:s r="244">
                                    <a:s r="228">
                                       <a:s>[Encounter: </a:s>
                                       <a:s>
                                          <a:s>&quot;Encounter Inpatient&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                    <a:s>
      union </a:s>
                                    <a:s r="237">
                                       <a:s>[Encounter: </a:s>
                                       <a:s>
                                          <a:s>&quot;Emergency Department Visit&quot;</a:s>
                                       </a:s>
                                       <a:s>]</a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>
      union </a:s>
                                 <a:s r="247">
                                    <a:s>[Encounter: </a:s>
                                    <a:s>
                                       <a:s>&quot;Telephone Evaluation&quot;</a:s>
                                    </a:s>
                                    <a:s>]</a:s>
                                 </a:s>
                              </a:s>
                              <a:s>
      union </a:s>
                              <a:s r="257">
                                 <a:s>[Encounter: </a:s>
                                 <a:s>
                                    <a:s>&quot;Telephone Management&quot;</a:s>
                                 </a:s>
                                 <a:s>]</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
  )</a:s>
                        </a:s>
                        <a:s> Encounter</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="266">
                     <a:s>where </a:s>
                     <a:s r="266">
                        <a:s r="267">
                           <a:s r="269">
                              <a:s r="268">
                                 <a:s>Encounter</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="269">
                                 <a:s>status</a:s>
                              </a:s>
                           </a:s>
                           <a:s> = </a:s>
                           <a:s r="270">
                              <a:s>'finished'</a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="275">
                           <a:s r="273">
                              <a:s r="272">
                                 <a:s>Encounter</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="273">
                                 <a:s>period</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="275"> during </a:s>
                           <a:s r="274">
                              <a:s>&quot;Measurement Period&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="278" locator="23:3-30:54" xsi:type="Query">
            <source localId="225" locator="23:3-28:13" alias="Encounter">
               <expression localId="265" locator="23:3-28:3" xsi:type="Union">
                  <operand localId="244" locator="24:5-25:53" xsi:type="Union">
                     <operand localId="228" locator="24:5-24:38" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" codeProperty="type" codeComparator="in" xsi:type="Retrieve">
                        <codes localId="227" locator="24:17-24:37" name="Encounter Inpatient" preserve="true" xsi:type="ValueSetRef"/>
                     </operand>
                     <operand localId="237" locator="25:13-25:53" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" codeProperty="type" codeComparator="in" xsi:type="Retrieve">
                        <codes localId="236" locator="25:25-25:52" name="Emergency Department Visit" preserve="true" xsi:type="ValueSetRef"/>
                     </operand>
                  </operand>
                  <operand localId="264" xsi:type="Union">
                     <operand localId="247" locator="26:13-26:47" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" codeProperty="type" codeComparator="in" xsi:type="Retrieve">
                        <codes localId="246" locator="26:25-26:46" name="Telephone Evaluation" preserve="true" xsi:type="ValueSetRef"/>
                     </operand>
                     <operand localId="257" locator="27:13-27:47" dataType="fhir:Encounter" templateId="http://hl7.org/fhir/StructureDefinition/Encounter" codeProperty="type" codeComparator="in" xsi:type="Retrieve">
                        <codes localId="256" locator="27:25-27:46" name="Telephone Management" preserve="true" xsi:type="ValueSetRef"/>
                     </operand>
                  </operand>
               </expression>
            </source>
            <where localId="266" locator="29:5-30:54" xsi:type="And">
               <operand localId="267" locator="29:11-29:39" xsi:type="Equal">
                  <operand localId="271" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="269" locator="29:11-29:26" path="status" scope="Encounter" xsi:type="Property"/>
                  </operand>
                  <operand localId="270" locator="29:30-29:39" valueType="t:String" value="finished" xsi:type="Literal"/>
               </operand>
               <operand localId="275" locator="30:11-30:54" xsi:type="IncludedIn">
                  <operand localId="276" name="ToInterval" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                     <operand localId="273" locator="30:11-30:26" path="period" scope="Encounter" xsi:type="Property"/>
                  </operand>
                  <operand localId="274" locator="30:35-30:54" name="Measurement Period" xsi:type="ParameterRef"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="280" locator="32:1-33:82" name="Initial Population" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="280">
               <a:s>define &quot;Initial Population&quot;:
  </a:s>
               <a:s r="281">
                  <a:s>exists </a:s>
                  <a:s r="282">
                     <a:s>(</a:s>
                     <a:s r="282">
                        <a:s>&quot;Inpatient, Emergency, or Telephone Evaluation or Management Encounter&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="281" locator="33:3-33:82" xsi:type="Exists">
            <operand localId="282" locator="33:10-33:82" name="Inpatient, Emergency, or Telephone Evaluation or Management Encounter" xsi:type="ExpressionRef"/>
         </expression>
      </def>
      <def localId="284" locator="35:1-36:6" name="Denominator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="284">
               <a:s r="285">define &quot;Denominator&quot;:
  true</a:s>
            </a:s>
         </annotation>
         <expression localId="285" locator="36:3-36:6" valueType="t:Boolean" value="true" xsi:type="Literal"/>
      </def>
      <def localId="287" locator="38:1-42:54" name="COVID-19 Communicable Disease Screening" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="287">
               <a:s>define &quot;COVID-19 Communicable Disease Screening&quot;:
  </a:s>
               <a:s r="332">
                  <a:s>
                     <a:s r="288">
                        <a:s r="291">
                           <a:s r="291">
                              <a:s>[Observation: </a:s>
                              <a:s>
                                 <a:s>&quot;COVID-19 Screening Result&quot;</a:s>
                              </a:s>
                              <a:s>]</a:s>
                           </a:s>
                        </a:s>
                        <a:s> Result</a:s>
                     </a:s>
                  </a:s>
                  <a:s>
    </a:s>
                  <a:s r="294">
                     <a:s>where </a:s>
                     <a:s r="294">
                        <a:s r="295">
                           <a:s r="296">
                              <a:s>exists </a:s>
                              <a:s r="306">
                                 <a:s>(</a:s>
                                 <a:s r="306">
                                    <a:s>
                                       <a:s r="297">
                                          <a:s r="299">
                                             <a:s>
                                                <a:s>Result.category</a:s>
                                             </a:s>
                                          </a:s>
                                          <a:s> C</a:s>
                                       </a:s>
                                    </a:s>
                                    <a:s> </a:s>
                                    <a:s r="300">
                                       <a:s>where </a:s>
                                       <a:s r="300">
                                          <a:s r="301">
                                             <a:s>C</a:s>
                                          </a:s>
                                          <a:s> ~ </a:s>
                                          <a:s r="302">
                                             <a:s>&quot;Laboratory Observation Category&quot;</a:s>
                                          </a:s>
                                       </a:s>
                                    </a:s>
                                 </a:s>
                                 <a:s>)</a:s>
                              </a:s>
                           </a:s>
                           <a:s>
      and </a:s>
                           <a:s r="313">
                              <a:s r="308">
                                 <a:s r="307">
                                    <a:s>Result</a:s>
                                 </a:s>
                                 <a:s>.</a:s>
                                 <a:s r="308">
                                    <a:s>status</a:s>
                                 </a:s>
                              </a:s>
                              <a:s> in </a:s>
                              <a:s r="309">
                                 <a:s>{ </a:s>
                                 <a:s r="310">
                                    <a:s>'final'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="311">
                                    <a:s>'amended'</a:s>
                                 </a:s>
                                 <a:s>, </a:s>
                                 <a:s r="312">
                                    <a:s>'corrected'</a:s>
                                 </a:s>
                                 <a:s> }</a:s>
                              </a:s>
                           </a:s>
                        </a:s>
                        <a:s>
      and </a:s>
                        <a:s r="321">
                           <a:s r="316">
                              <a:s r="315">
                                 <a:s>Result</a:s>
                              </a:s>
                              <a:s>.</a:s>
                              <a:s r="316">
                                 <a:s>effective</a:s>
                              </a:s>
                           </a:s>
                           <a:s r="321"> during </a:s>
                           <a:s r="317">
                              <a:s>&quot;Measurement Period&quot;</a:s>
                           </a:s>
                        </a:s>
                     </a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="332" locator="39:3-42:54" xsi:type="Query">
            <source localId="288" locator="39:3-39:51" alias="Result">
               <expression localId="291" locator="39:3-39:44" dataType="fhir:Observation" templateId="http://hl7.org/fhir/StructureDefinition/Observation" codeProperty="code" codeComparator="in" xsi:type="Retrieve">
                  <codes localId="290" locator="39:17-39:43" name="COVID-19 Screening Result" preserve="true" xsi:type="ValueSetRef"/>
               </expression>
            </source>
            <where localId="294" locator="40:5-42:54" xsi:type="And">
               <operand localId="295" locator="40:11-41:62" xsi:type="And">
                  <operand localId="296" locator="40:11-40:80" xsi:type="Exists">
                     <operand localId="306" locator="40:18-40:80" xsi:type="Query">
                        <source localId="297" locator="40:19-40:35" alias="C">
                           <expression localId="299" locator="40:19-40:33" path="category" scope="Result" xsi:type="Property"/>
                        </source>
                        <where localId="300" locator="40:37-40:79" xsi:type="Equivalent">
                           <operand localId="303" name="ToConcept" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                              <operand localId="301" locator="40:43" name="C" xsi:type="AliasRef"/>
                           </operand>
                           <operand localId="305" xsi:type="ToConcept">
                              <operand localId="302" locator="40:47-40:79" name="Laboratory Observation Category" xsi:type="CodeRef"/>
                           </operand>
                        </where>
                     </operand>
                  </operand>
                  <operand localId="313" locator="41:11-41:62" xsi:type="In">
                     <operand localId="314" name="ToString" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                        <operand localId="308" locator="41:11-41:23" path="status" scope="Result" xsi:type="Property"/>
                     </operand>
                     <operand localId="309" locator="41:28-41:62" xsi:type="List">
                        <element localId="310" locator="41:30-41:36" valueType="t:String" value="final" xsi:type="Literal"/>
                        <element localId="311" locator="41:39-41:47" valueType="t:String" value="amended" xsi:type="Literal"/>
                        <element localId="312" locator="41:50-41:60" valueType="t:String" value="corrected" xsi:type="Literal"/>
                     </operand>
                  </operand>
               </operand>
               <operand localId="321" locator="42:11-42:54" xsi:type="In">
                  <operand localId="324" xsi:type="Case">
                     <caseItem localId="325">
                        <when localId="326" isType="fhir:dateTime" xsi:type="Is">
                           <operand localId="316" locator="42:11-42:26" path="effective" scope="Result" xsi:type="Property"/>
                        </when>
                        <then localId="323" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="322" asType="fhir:dateTime" xsi:type="As">
                              <operand localId="316" locator="42:11-42:26" path="effective" scope="Result" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <caseItem localId="327">
                        <when localId="328" isType="fhir:instant" xsi:type="Is">
                           <operand localId="316" locator="42:11-42:26" path="effective" scope="Result" xsi:type="Property"/>
                        </when>
                        <then localId="330" name="ToDateTime" libraryName="FHIRHelpers" xsi:type="FunctionRef">
                           <operand localId="329" asType="fhir:instant" xsi:type="As">
                              <operand localId="316" locator="42:11-42:26" path="effective" scope="Result" xsi:type="Property"/>
                           </operand>
                        </then>
                     </caseItem>
                     <else localId="331" xsi:type="Null"/>
                  </operand>
                  <operand localId="317" locator="42:35-42:54" name="Measurement Period" xsi:type="ParameterRef"/>
               </operand>
            </where>
         </expression>
      </def>
      <def localId="334" locator="44:1-45:52" name="Numerator" context="Patient" accessLevel="Public">
         <annotation xsi:type="a:Annotation">
            <a:s r="334">
               <a:s>define &quot;Numerator&quot;:
  </a:s>
               <a:s r="335">
                  <a:s>exists </a:s>
                  <a:s r="336">
                     <a:s>(</a:s>
                     <a:s r="336">
                        <a:s>&quot;COVID-19 Communicable Disease Screening&quot;</a:s>
                     </a:s>
                     <a:s>)</a:s>
                  </a:s>
               </a:s>
            </a:s>
         </annotation>
         <expression localId="335" locator="45:3-45:52" xsi:type="Exists">
            <operand localId="336" locator="45:10-45:52" name="COVID-19 Communicable Disease Screening" xsi:type="ExpressionRef"/>
         </expression>
      </def>
   </statements>
</library>
